<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />

        <!-- Mobile -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- CSS -->
        <link rel="stylesheet" href="/theme.css">
        <link rel="stylesheet" href="fusion.css">
        <style>
            /* Outfit Latin */
            @font-face {
                font-family: 'Outfit';
                font-style: normal;
                font-weight: 100 900;
                font-display: swap;
                src: url(https://fonts.gstatic.com/s/outfit/v14/QGYvz_MVcBeNP4NJtEtqUYTkntBJ.woff2) format('woff2');
                unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
            }
        </style>

        <!-- Source Sans 3 -->
        <link rel="preload" href="https://fonts.gstatic.com/s/sourcesans3/v18/nwpStKy2OAdR1K-IwhWudF-R3w8aZejZ5HZV8Q.woff2" as="font" crossorigin="anonymous">
        <link rel="preload" href="https://fonts.gstatic.com/s/sourcesans3/v18/nwpStKy2OAdR1K-IwhWudF-R3w8aZejZ5HZV8Q.woff2" as="font" crossorigin="anonymous">

        <!-- Preconnect -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="preconnect" href="https://cdnjs.cloudflare.com">

        <!-- Animation Continuity -->
        <script>
            const elapsed = Date.now() % 360000;
            document.documentElement.style.setProperty('--animation-delay', `-${elapsed}ms`);
        </script>

        <!-- Preload -->
        <link rel="preload" href="/assets/background_tile_half.png" as="image">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" crossorigin="anonymous">
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-solid-900.woff2" as="font" crossorigin="anonymous">
        <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/webfonts/fa-brands-400.woff2" as="font" crossorigin="anonymous">

        <!-- HTML Meta Tags -->
        <title>Fusion Tools - PizzaBlu</title>
        <link rel="icon" type="image/x-icon" href="/assets/favicon.png">
        <meta name="description" content="The missing tools for DaVinci Resolve.">
        
        <!-- Open Graph Meta Tags -->
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Fusion Tools" />
        <meta property="og:description" content="The missing tools for DaVinci Resolve." />
        <meta property="og:image" content="https://pizzablu.github.io/assets/pizzablu.png" />
        <meta property="og:image:width" content="128" />
        <meta property="og:image:height" content="128" />
        <meta property="og:url" content="https://pizzablu.github.io/index.html" />
        <meta property="og:site_name" content="PizzaBlu" />

        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary">
        <meta property="twitter:domain" content="pizzablu.github.io">
        <meta property="twitter:url" content="https://pizzablu.github.io/">
        <meta name="twitter:title" content="Fusion Tools">
        <meta name="twitter:description" content="The missing tools for DaVinci Resolve.">
        <meta name="twitter:image" content="https://pizzablu.github.io/assets/pizzablu.png">
    </head>
    <body style="background-color: #171b1f; color: #ffffff; overflow-x: hidden; width: 100vw; margin: 0; padding: 0;">
        <div class="hero" id="hero">
            <div class="hero-background"></div>
                <div class="hero-main">
                    <div class="hero-container">
                        <h1>Fusion Tools</h1>
                        <h2>The missing tools for DaVinci Resolve</h2>
                        <span class="herolinks">
                            <a href="/index.html" class="link-button"><i class="fa-solid fa-home"></i> Home</a>
                            <!-- <a href="https://www.youtube.com/channel/UCxOrC01PVvxYe_JzB9Q8nqQ" class="link-button"><i class="fa-brands fa-youtube"></i></i> Watch</a> -->
                            <a href="https://ko-fi.com/pizzablu/shop" class="link-button"><i class="fa-solid fa-bag-shopping"></i> Shop</a>
                        </span>
                    </div>
                </div>
            </div>
        </div>

        <section class="tools-section" id="tools-section">
            <div class="tools-nav fullscreen-only-strict" id="tools-nav">
                <h3><a href="#hero">Tools</a></h3>
                <ul id="nav-list">
                    <li id="nav-layout"><a href="#layout">Layout</a></li>
                    <li id="nav-effects"><a href="#effects">Effects</a></li>
                    <li id="nav-shapes"><a href="#shapes">Shapes</a></li>
                    <li id="nav-more"><a href="#more">More</a></li>
                </ul>
                <h3><a href="/links">Links</a></h3>
                <ul>
                    <li><a href="https://ko-fi.com/pizzablu/shop">Shop</a></li>
                    <li><a href="./discord">Discord</a></li>
                    <li><a href="https://www.youtube.com/channel/UCxOrC01PVvxYe_JzB9Q8nqQ">YouTube</a></li>
                    <li><a href="./installing">Setup Guide</a></li>
                </ul>
            </div>

            <div class="container main tools-main">
                <h2 class="tall" id="layout">Layout</h2>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/BarChart.mp4" data-tool="BarChart" data-shop="https://ko-fi.com/s/4c438879a6"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/ArrayMerge.mp4" data-tool="ArrayMerge"data-shop="https://ko-fi.com/s/28b2e61eb2"></div>
                </div>

                <h2 class="tall" id="effects">Effects</h2>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/Posterize.mp4" data-tool="Posterize" data-shop="https://ko-fi.com/s/814b625874"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/Halftone.mp4"data-tool="Halftone"></div>
                </div>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/NeonGlow.mp4" data-tool="NeonGlow"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/InnerShadow.mp4" data-tool="InnerShadow"></div>
                </div>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/Outline.mp4" data-tool="Outline"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/LongShadow.mp4" data-tool="LongShadow"></div>
                </div>

                <h2 class="tall" id="shapes">Shapes</h1>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/MaskWipe.mp4" data-tool="MaskWipe"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/Squircle.mp4" data-tool="Squircle"></div>
                </div>

                <h1 class="tall">GPU Accelerated</h1>
                <h2>smooth playback & fast renders</h2>
                <div class="plugin-placeholder demo-placeholder" data-src="/fusion/video/LongShadowDemo.mp4"></div>

                <h2 class="tall"></h2>
                <h2 class="tall" id="more">More</h1>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/CropPlus.mp4" data-tool="CropPlus"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/ResizePlus.mp4" data-tool="ResizePlus"></div>
                </div>
                <div class="plugin-row">
                    <div class="plugin-placeholder" data-src="/fusion/video/BackFill.mp4" data-tool="BackFill"></div>
                    <div class="plugin-placeholder" data-src="/fusion/video/PublishSize.mp4" data-tool="PublishSize"></div>
                </div>
            </div>
        </section>

        <div class="footer main">
            <div class="row">
                <h2>More on KoFi</h2>
            </div>
        </div>

        <script>
            // lazy loading videos
            const playVideo = async video => {
                video.currentTime = 0;
                try {
                    await video?.play();
                } catch (err) {
                    if (err.name !== 'AbortError') console.warn(err);
                }
            };
            const pauseVideo = video => {
                if (video && !video.paused) video.pause();
            }
            const injectVideo = container => {
                let video = container.querySelector('video');
                if (video) return video;

                const url = container.dataset.src;
                if (!url) return;

                const shoplink = container.dataset.shop;

                video = document.createElement('video');
                video.className = 'plugin-video';
                video.muted = true;
                video.loop = true;
                video.setAttribute('playsinline', ''); 
                video.setAttribute('preload', 'auto');
                video.setAttribute('aria-label', `${container.dataset.tool} Tool`);
                video.setAttribute('id', `tool-${container.dataset.tool}`);

                const a = document.createElement('a');
                if (shoplink) {
                    a.href = shoplink;
                    a.title = "Shop on KoFi";
                } else {
                    a.title = "Coming Soon";
                }
                a.appendChild(video);
                container.appendChild(a);

                video.src = url;
                video.load();

                return video;
            }
            const injectAndPlay = container => playVideo(injectVideo(container));
            const injectAndPause = container => pauseVideo(injectVideo(container));

            // preload upcoming videos
            const observer_load = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const video = entry.target.querySelector('video');
                    if (entry.isIntersecting) injectVideo(entry.target);
                });
            }, {
                threshold: 0.2,
                rootMargin: '512px 0px',
            });

            // play/pause videos as they enter/exit the view
            const observer_play = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    const video = entry.target.querySelector('video');
                    if (entry.isIntersecting) injectAndPlay(entry.target);
                    else if (video && !video.paused) video.pause();
                });
            }, {
                threshold: 0.1,
                rootMargin: '64px 0px',
            });

            document.querySelectorAll('.plugin-placeholder').forEach(video => observer_load.observe(video));
            document.querySelectorAll('.plugin-placeholder').forEach(video => observer_play.observe(video));

            window.addEventListener('touchstart', () => {
                document.querySelectorAll('.plugin-placeholder .plugin-video').forEach(video => {
                    if (video.paused && video.checkVisibility()) playVideo(video);
                });
            }, { once: true, passive: true });
        </script>

        <script src="./navbar.js"></script>

        <!-- Google Analytics -->
         <script>
            window.minimalAnalytics = {
                trackingId: 'G-PJX6P9P9GV',
                autoTrack: true,
            };
        </script>
        <script defer src="https://unpkg.com/@minimal-analytics/ga4/dist/index.js" fetchpriority="low"></script>
    </body>
</html>